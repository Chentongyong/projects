{"version":3,"sources":["webpack:///D:/orange/xiaoyuanDIY/main.js","webpack:///D:/orange/xiaoyuanDIY/pages/edit/edit.vue?ce33","webpack:///D:/orange/xiaoyuanDIY/pages/edit/edit.vue?5e4e","webpack:///D:/orange/xiaoyuanDIY/pages/edit/edit.vue?6dad","webpack:///D:/orange/xiaoyuanDIY/pages/edit/edit.vue?9d56","webpack:///D:/orange/xiaoyuanDIY/pages/edit/edit.vue","webpack:///D:/orange/xiaoyuanDIY/pages/edit/edit.vue?7b7a","webpack:///D:/orange/xiaoyuanDIY/pages/edit/edit.vue?c56d"],"names":["createPage","Page","currentIndex","images_arr","old_x","old_y","startX","startY","old_width","startDistance","app","getApp","data","userInfo","id","type","temp","scale","isShowOperation","cover","width","height","wordTouch","onLoad","options","that","device","uni","getSystemInfoSync","screen_width","screenWidth","globalData","templateData","console","log","word","name","push","birthday","qq","father_phone","mother_phone","address","hobby","motto","to_me","to_classmate","phone","subjects","message","txt","api","templateDetail","cate_id","f_id","success","res","photo","length","template","parseInt","box","forEach","el","idx","w","h","x","y","img","url","rotate_url","isfixed","rotate","size","color","getImageInfo","src","path","$set","images","item","index","getImageData","methods","rotateImage","ratios","deg","img_w","img_h","ctx","createCanvasContext","clearRect","translate","Math","PI","drawImage","draw","setTimeout","canvasToTempFilePath","destWidth","destHeight","canvasId","tempFilePath","clickImage","e","currentTarget","dataset","uploadImage","num","result","changeImage","touchS","touches","clientX","clientY","touchM","moveX","moveY","disX","disY","TxtTouchS","abs","TxtTouchM","moveDistance","left","TxtTouchE","back","navigateBack","delta","submit","util","msg","showLoading","title","save","fillRect","clip","restore","m_t","setFontSize","setFillStyle","floor","fillText","word_arr","split","arr","str","max_num","vo","hideLoading","JSON","stringify","uploadFile","host","header","token","filePath","formData","parse","code","identity","reLaunch","fail"],"mappings":"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","file":"pages/edit/edit.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/edit/edit.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./edit.vue?vue&type=template&id=e4f23064&\"\nvar renderjs\nimport script from \"./edit.vue?vue&type=script&lang=js&\"\nexport * from \"./edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./edit.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('e4f23064')) {\n      api.createRecord('e4f23064', component.options)\n    } else {\n      api.reload('e4f23064', component.options)\n    }\n    module.hot.accept(\"./edit.vue?vue&type=template&id=e4f23064&\", function () {\n      api.rerender('e4f23064', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"orange/xiaoyuanDIY/pages/edit/edit.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=template&id=e4f23064&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nimport api from '../../utils/api.js';\r\nimport util from '../../utils/util.js';\r\nlet currentIndex = '';\r\nlet images_arr = '';\r\nlet old_x = '';\r\nlet old_y = '';\r\nlet startX = '';\r\nlet startY = '';\r\nlet old_width = '';\r\nlet startDistance = '';\r\nconst app = getApp();\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuserInfo: {},\r\n\t\t\tid: '',\r\n\t\t\ttype: '',\r\n\t\t\ttemp: {},\r\n\t\t\tscale: 0,\r\n\t\t\tisShowOperation: false,\r\n\t\t\tcover: {\r\n\t\t\t\twidth: 0,\r\n\t\t\t\theight: 0\r\n\t\t\t},\r\n\t\t\tdata: {},\r\n\t\t\twordTouch: false\r\n\t\t};\r\n\t},\r\n\tonLoad(options) {\r\n\t\tconst that = this;\r\n\t\t// 获取屏幕宽度\r\n\t\tconst device = uni.getSystemInfoSync();\r\n\t\tlet screen_width = device.screenWidth;\r\n\t\t//\r\n\t\tlet data = app.globalData.templateData;\r\n\t\tconsole.log(data);\r\n\t\tthis.data = data;\r\n\t\tlet word = [];\r\n\t\tif (data.word.name) {\r\n\t\t\tword.push('姓名：' + data.word.name);\r\n\t\t}\r\n\t\tif (data.word.birthday) {\r\n\t\t\tword.push('生日：' + data.word.birthday);\r\n\t\t}\r\n\t\tif (data.word.qq) {\r\n\t\t\tword.push('QQ：' + data.word.qq);\r\n\t\t}\r\n\t\tif (data.word.father_phone) {\r\n\t\t\tword.push('父母电话：' + data.word.father_phone + '/' + data.word.mother_phone);\r\n\t\t}\r\n\t\tif (data.word.address) {\r\n\t\t\tword.push('我家的地址：' + data.word.address);\r\n\t\t}\r\n\t\tif (data.word.hobby) {\r\n\t\t\tword.push('我的爱好：' + data.word.hobby);\r\n\t\t}\r\n\t\tif (data.word.motto) {\r\n\t\t\tword.push('人生座右铭：' + data.word.motto);\r\n\t\t}\r\n\t\tif (data.word.to_me) {\r\n\t\t\tword.push('写给十年后的自己：' + data.word.to_me);\r\n\t\t}\r\n\t\tif (data.word.to_classmate) {\r\n\t\t\tword.push('同学我想对你说：' + data.word.to_classmate);\r\n\t\t}\r\n\t\tif (data.word.phone) {\r\n\t\t\tword.push('电话：' + data.word.phone);\r\n\t\t}\r\n\t\tif (data.word.subjects) {\r\n\t\t\tword.push('任教科目：' + data.word.subjects);\r\n\t\t}\r\n\t\tif (data.word.message) {\r\n\t\t\tword.push('毕业寄语：' + data.word.message);\r\n\t\t}\r\n\t\tif(data.word.txt){\r\n\t\t\tword.push(data.word.txt);\r\n\t\t}\r\n\t\t// 获取模板数据\r\n\t\tapi.templateDetail({\r\n\t\t\tdata: {\r\n\t\t\t\tcate_id: data.f_id\r\n\t\t\t},\r\n\t\t\tsuccess: function(res) {\r\n\t\t\t\tif(!res.photo || res.photo.length == 0){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tlet temp = res.photo[0].template;\r\n\t\t\t\ttemp.word = word;\r\n\t\t\t\t// 设置缩放比例\r\n\t\t\t\tlet scale = parseInt(temp.width) / screen_width;\r\n\t\t\t\tthat.scale = scale;\r\n\t\t\t\t// 缩放数据大小\r\n\t\t\t\ttemp.width = temp.width / scale;\r\n\t\t\t\ttemp.height = temp.height / scale;\r\n\t\t\t\t// 图片\r\n\t\t\t\tif (temp.box && temp.box.length > 0) {\r\n\t\t\t\t\ttemp.box.forEach((el, idx) => {\r\n\t\t\t\t\t\tel.w = el.w / scale;\r\n\t\t\t\t\t\tel.h = el.h / scale;\r\n\t\t\t\t\t\tel.x = el.x / scale;\r\n\t\t\t\t\t\tel.y = el.y / scale;\r\n\t\t\t\t\t\tel.img = {\r\n\t\t\t\t\t\t\turl: '',\r\n\t\t\t\t\t\t\trotate_url: '',\r\n\t\t\t\t\t\t\tw: el.w,\r\n\t\t\t\t\t\t\th: el.h,\r\n\t\t\t\t\t\t\tx: 0,\r\n\t\t\t\t\t\t\ty: 0,\r\n\t\t\t\t\t\t\tisfixed: 'w',\r\n\t\t\t\t\t\t\trotate: 0\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t// 文字\r\n\t\t\t\tif (word.length > 0) {\r\n\t\t\t\t\ttemp.txt = {\r\n\t\t\t\t\t\twidth: temp.width * 0.6,\r\n\t\t\t\t\t\tsize: res.size / scale,\r\n\t\t\t\t\t\tcolor: res.color,\r\n\t\t\t\t\t\tx: 0,\r\n\t\t\t\t\t\ty: 0\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tuni.getImageInfo({\r\n\t\t\t\t\tsrc: temp.url,\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\ttemp.url = res.path;\r\n\t\t\t\t\t\tthat.$set(that, 'temp', temp);\r\n\t\t\t\t\t\tdata.images.forEach((item, index) => {\r\n\t\t\t\t\t\t\tthat.getImageData(item, index);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\t// 获取用户信息\r\n\t\tapi.userInfo({\r\n\t\t\tsuccess: function(res) {\r\n\t\t\t\tthat.userInfo = res;\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tmethods: {\r\n\t\t// 旋转图片\r\n\t\trotateImage(index) {\r\n\t\t\t// 旋转图片\r\n\t\t\tconst that = this;\r\n\t\t\tlet rotate = parseInt(this.temp.box[currentIndex].img.rotate) || 0;\r\n\t\t\tif (index == 0) {\r\n\t\t\t\t// 逆时针90°\r\n\t\t\t\trotate -= 90;\r\n\t\t\t} else {\r\n\t\t\t\t// 顺时针90°\r\n\t\t\t\trotate += 90;\r\n\t\t\t}\r\n\t\t\tif (rotate % 360 == 0) {\r\n\t\t\t\trotate = 0;\r\n\t\t\t}\r\n\t\t\tlet box = this.temp.box[currentIndex];\r\n\t\t\tlet width = box.img.height;\r\n\t\t\tlet height = box.img.width;\r\n\t\t\tlet w = 0;\r\n\t\t\tlet h = 0;\r\n\t\t\tlet x = 0;\r\n\t\t\tlet y = 0;\r\n\t\t\tlet ratios = box.w / box.h;\r\n\t\t\tlet isfixed = '';\r\n\t\t\tif (width / height <= ratios) {\r\n\t\t\t\t// 当前图片宽高比 >= 显示区域宽高比 ，图片宽 == 显示区域宽\r\n\t\t\t\tw = box.w;\r\n\t\t\t\th = (w * height) / width;\r\n\t\t\t\ty = -(h - box.h) / 2;\r\n\t\t\t\tisfixed = 'w';\r\n\t\t\t} else {\r\n\t\t\t\t// 当前图片宽高比 < 显示区域宽高比 ，图片高 == 显示区域高\r\n\t\t\t\th = box.h;\r\n\t\t\t\tw = (h * width) / height;\r\n\t\t\t\tx = -(w - box.w) / 2;\r\n\t\t\t\tisfixed = 'y';\r\n\t\t\t}\r\n\t\t\tlet url = this.temp.box[currentIndex].img.url;\r\n\t\t\tlet rotate_url = '';\r\n\t\t\tlet deg = (360 + rotate) % 360;\r\n\t\t\tlet img_w = w;\r\n\t\t\tlet img_h = h;\r\n\t\t\tconst ctx = uni.createCanvasContext('myCanvas');\r\n\t\t\tctx.clearRect(0, 0, w, h);\r\n\t\t\tctx.translate(img_w / 2, img_h / 2);\r\n\t\t\tctx.rotate((deg * Math.PI) / 180);\r\n\t\t\tif (deg == 90 || deg == 270) {\r\n\t\t\t\timg_w = h;\r\n\t\t\t\timg_h = w;\r\n\t\t\t}\r\n\t\t\tctx.drawImage(url, -img_w / 2, -img_h / 2, img_w, img_h);\r\n\t\t\tctx.draw();\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t\tx: 0,\r\n\t\t\t\t\ty: 0,\r\n\t\t\t\t\twidth: w,\r\n\t\t\t\t\theight: h,\r\n\t\t\t\t\tdestWidth: w,\r\n\t\t\t\t\tdestHeight: h,\r\n\t\t\t\t\tcanvasId: 'myCanvas',\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tthat.temp.box[currentIndex].img = {\r\n\t\t\t\t\t\t\turl: url,\r\n\t\t\t\t\t\t\trotate_url: res.tempFilePath,\r\n\t\t\t\t\t\t\twidth: w,\r\n\t\t\t\t\t\t\theight: h,\r\n\t\t\t\t\t\t\tx: x,\r\n\t\t\t\t\t\t\ty: y,\r\n\t\t\t\t\t\t\tisfixed: isfixed,\r\n\t\t\t\t\t\t\trotate: rotate\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthat.isShowOperation = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}, 400);\r\n\t\t},\r\n\t\t// 获取图片信息并放到模板中\r\n\t\tgetImageData(photo, index) {\r\n\t\t\tconst that = this;\r\n\t\t\tlet box = that.temp.box[index];\r\n\t\t\tuni.getImageInfo({\r\n\t\t\t\tsrc: photo,\r\n\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\tlet w = 0;\r\n\t\t\t\t\tlet h = 0;\r\n\t\t\t\t\tlet x = 0;\r\n\t\t\t\t\tlet y = 0;\r\n\t\t\t\t\tlet ratios = box.w / box.h;\r\n\t\t\t\t\tlet isfixed = '';\r\n\t\t\t\t\tif (res.width / res.height <= ratios) {\r\n\t\t\t\t\t\t// 当前图片宽高比 >= 显示区域宽高比 ，图片宽 == 显示区域宽\r\n\t\t\t\t\t\tw = box.w;\r\n\t\t\t\t\t\th = (w * res.height) / res.width;\r\n\t\t\t\t\t\ty = -(h - box.h) / 2;\r\n\t\t\t\t\t\tisfixed = 'w';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 当前图片宽高比 < 显示区域宽高比 ，图片高 == 显示区域高\r\n\t\t\t\t\t\th = box.h;\r\n\t\t\t\t\t\tw = (h * res.width) / res.height;\r\n\t\t\t\t\t\tx = -(w - box.w) / 2;\r\n\t\t\t\t\t\tisfixed = 'y';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbox.img = {\r\n\t\t\t\t\t\turl: photo,\r\n\t\t\t\t\t\trotate_url: photo,\r\n\t\t\t\t\t\twidth: w,\r\n\t\t\t\t\t\theight: h,\r\n\t\t\t\t\t\tx: x,\r\n\t\t\t\t\t\ty: y,\r\n\t\t\t\t\t\tisfixed: isfixed,\r\n\t\t\t\t\t\trotate: 0\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthat.$set(that.temp.box, index, box);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 点击图片区域\r\n\t\tclickImage(e) {\r\n\t\t\tconst that = this;\r\n\t\t\tlet idx = e.currentTarget.dataset.idx;\r\n\t\t\tif (this.temp.box[idx].img.url) {\r\n\t\t\t\t// 显示操作\r\n\t\t\t\tthis.isShowOperation = !this.isShowOperation;\r\n\t\t\t} else {\r\n\t\t\t\t// 添加图片\r\n\t\t\t\tapi.uploadImage({\r\n\t\t\t\t\tnum: 1,\r\n\t\t\t\t\tsuccess: function(result) {\r\n\t\t\t\t\t\tlet photo = result[0];\r\n\t\t\t\t\t\tlet box = that.temp.box[idx];\r\n\t\t\t\t\t\tuni.getImageInfo({\r\n\t\t\t\t\t\t\tsrc: photo,\r\n\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\tlet w = 0;\r\n\t\t\t\t\t\t\t\tlet h = 0;\r\n\t\t\t\t\t\t\t\tlet x = 0;\r\n\t\t\t\t\t\t\t\tlet y = 0;\r\n\t\t\t\t\t\t\t\tlet ratios = box.w / box.h;\r\n\t\t\t\t\t\t\t\tlet isfixed = '';\r\n\t\t\t\t\t\t\t\tif (res.width / res.height <= ratios) {\r\n\t\t\t\t\t\t\t\t\t// 当前图片宽高比 >= 显示区域宽高比 ，图片宽 == 显示区域宽\r\n\t\t\t\t\t\t\t\t\tw = box.w;\r\n\t\t\t\t\t\t\t\t\th = (w * res.height) / res.width;\r\n\t\t\t\t\t\t\t\t\ty = -(h - box.h) / 2;\r\n\t\t\t\t\t\t\t\t\tisfixed = 'w';\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t// 当前图片宽高比 < 显示区域宽高比 ，图片高 == 显示区域高\r\n\t\t\t\t\t\t\t\t\th = box.h;\r\n\t\t\t\t\t\t\t\t\tw = (h * res.width) / res.height;\r\n\t\t\t\t\t\t\t\t\tx = -(w - box.w) / 2;\r\n\t\t\t\t\t\t\t\t\tisfixed = 'y';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tbox.img = {\r\n\t\t\t\t\t\t\t\t\turl: photo,\r\n\t\t\t\t\t\t\t\t\trotate_url: photo,\r\n\t\t\t\t\t\t\t\t\twidth: w,\r\n\t\t\t\t\t\t\t\t\theight: h,\r\n\t\t\t\t\t\t\t\t\tx: x,\r\n\t\t\t\t\t\t\t\t\ty: y,\r\n\t\t\t\t\t\t\t\t\tisfixed: isfixed,\r\n\t\t\t\t\t\t\t\t\trotate: 0\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tthat.$set(that.temp.box, idx, box);\r\n\t\t\t\t\t\t\t\tthat.isShowOperation = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 更换图片\r\n\t\tchangeImage() {\r\n\t\t\tconst that = this;\r\n\t\t\tapi.uploadImage({\r\n\t\t\t\tnum: 1,\r\n\t\t\t\tsuccess: function(result) {\r\n\t\t\t\t\tlet photo = result[0];\r\n\t\t\t\t\tlet box = that.temp.box[currentIndex];\r\n\t\t\t\t\tuni.getImageInfo({\r\n\t\t\t\t\t\tsrc: photo,\r\n\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\tlet w = 0;\r\n\t\t\t\t\t\t\tlet h = 0;\r\n\t\t\t\t\t\t\tlet x = 0;\r\n\t\t\t\t\t\t\tlet y = 0;\r\n\t\t\t\t\t\t\tlet ratios = box.w / box.h;\r\n\t\t\t\t\t\t\tlet isfixed = '';\r\n\t\t\t\t\t\t\tif (res.width / res.height <= ratios) {\r\n\t\t\t\t\t\t\t\t// 当前图片宽高比 >= 显示区域宽高比 ，图片宽 == 显示区域宽\r\n\t\t\t\t\t\t\t\tw = box.w;\r\n\t\t\t\t\t\t\t\th = (w * res.height) / res.width;\r\n\t\t\t\t\t\t\t\ty = -(h - box.h) / 2;\r\n\t\t\t\t\t\t\t\tisfixed = 'w';\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// 当前图片宽高比 < 显示区域宽高比 ，图片高 == 显示区域高\r\n\t\t\t\t\t\t\t\th = box.h;\r\n\t\t\t\t\t\t\t\tw = (h * res.width) / res.height;\r\n\t\t\t\t\t\t\t\tx = -(w - box.w) / 2;\r\n\t\t\t\t\t\t\t\tisfixed = 'y';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbox.img = {\r\n\t\t\t\t\t\t\t\turl: photo,\r\n\t\t\t\t\t\t\t\trotate_url: photo,\r\n\t\t\t\t\t\t\t\twidth: w,\r\n\t\t\t\t\t\t\t\theight: h,\r\n\t\t\t\t\t\t\t\tx: x,\r\n\t\t\t\t\t\t\t\ty: y,\r\n\t\t\t\t\t\t\t\tisfixed: isfixed,\r\n\t\t\t\t\t\t\t\trotate: 0\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tthat.$set(that.temp.box, currentIndex, box);\r\n\t\t\t\t\t\t\tthat.isShowOperation = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\ttouchS(e) {\r\n\t\t\tif (e.touches.length == 1) {\r\n\t\t\t\t//触摸起始点位置\r\n\t\t\t\tcurrentIndex = e.currentTarget.dataset.idx;\r\n\t\t\t\tstartX = e.touches[0].clientX;\r\n\t\t\t\tstartY = e.touches[0].clientY;\r\n\t\t\t\told_x = this.temp.box[currentIndex].img.x;\r\n\t\t\t\told_y = this.temp.box[currentIndex].img.y;\r\n\t\t\t}\r\n\t\t},\r\n\t\ttouchM(e) {\r\n\t\t\tif (e.touches.length == 1) {\r\n\t\t\t\t//手指移动时位置\r\n\t\t\t\tvar moveX = e.touches[0].clientX;\r\n\t\t\t\tvar moveY = e.touches[0].clientY;\r\n\t\t\t\t//手指起始点位置与移动期间的差值\r\n\t\t\t\tvar disX = moveX - startX;\r\n\t\t\t\tvar disY = moveY - startY;\r\n\t\t\t\tlet box = this.temp.box[currentIndex];\r\n\t\t\t\tif (box.img.isfixed == 'w') {\r\n\t\t\t\t\t// 固定不可左右移动，只能上下移动\r\n\t\t\t\t\tlet y = old_y + disY;\r\n\t\t\t\t\tif (y > 0) {\r\n\t\t\t\t\t\ty = 0;\r\n\t\t\t\t\t} else if (y < -box.img.height + box.h) {\r\n\t\t\t\t\t\ty = -box.img.height + box.h;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbox.img.y = y;\r\n\t\t\t\t\tthis.$set(this.temp.box, currentIndex, box);\r\n\t\t\t\t} else if (this.temp.box[currentIndex].img.isfixed == 'y') {\r\n\t\t\t\t\t// 固定不可上下移动，只能左右移动\r\n\t\t\t\t\tlet x = old_x + disX;\r\n\t\t\t\t\tif (x > 0) {\r\n\t\t\t\t\t\tx = 0;\r\n\t\t\t\t\t} else if (x < -box.img.width + box.w) {\r\n\t\t\t\t\t\tx = -box.img.width + box.w;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbox.img.x = x;\r\n\t\t\t\t\tthis.$set(this.temp.box, currentIndex, box);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tTxtTouchS(e) {\r\n\t\t\t//触摸起始点位置\r\n\t\t\tif (e.touches.length == 1) {\r\n\t\t\t\tstartX = e.touches[0].clientX;\r\n\t\t\t\tstartY = e.touches[0].clientY;\r\n\t\t\t\told_x = this.temp.txt.x;\r\n\t\t\t\told_y = this.temp.txt.y;\r\n\t\t\t\tthis.wordTouch = true;\r\n\t\t\t} else if (e.touches.length == 2) {\r\n\t\t\t\tstartDistance = Math.abs(e.touches[0].clientX - e.touches[1].clientX);\r\n\t\t\t\told_width = this.temp.txt.width;\r\n\t\t\t}\r\n\t\t},\r\n\t\tTxtTouchM(e) {\r\n\t\t\tif (e.touches.length == 1) {\r\n\t\t\t\t//手指移动时位置\r\n\t\t\t\tvar moveX = e.touches[0].clientX;\r\n\t\t\t\tvar moveY = e.touches[0].clientY;\r\n\t\t\t\t//手指起始点位置与移动期间的差值\r\n\t\t\t\tvar disX = moveX - startX;\r\n\t\t\t\tvar disY = moveY - startY;\r\n\t\t\t\tlet x = old_x + disX;\r\n\t\t\t\tlet y = old_y + disY;\r\n\t\t\t\tthis.temp.txt.x = x;\r\n\t\t\t\tthis.temp.txt.y = y;\r\n\t\t\t} else if (e.touches.length == 2) {\r\n\t\t\t\tvar moveDistance = Math.abs(e.touches[0].clientX - e.touches[1].clientX);\r\n\t\t\t\tlet left = moveDistance - startDistance;\r\n\t\t\t\tthis.temp.txt.width = old_width + left;\r\n\t\t\t}\r\n\t\t},\r\n\t\tTxtTouchE() {\r\n\t\t\tthis.wordTouch = false;\r\n\t\t},\r\n\t\tback() {\r\n\t\t\tuni.navigateBack({\r\n\t\t\t\tdelta: 1\r\n\t\t\t});\r\n\t\t},\r\n\t\tsubmit() {\r\n\t\t\tconst that = this;\r\n\t\t\tlet num = 0;\r\n\t\t\tif(this.temp.box){\r\n\t\t\t\tthis.temp.box.forEach(function(item) {\r\n\t\t\t\t\tif (!item.img.url) {\r\n\t\t\t\t\t\tnum++;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (num > 0) {\r\n\t\t\t\tutil.msg('还需添加照片');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '正在保存数据'\r\n\t\t\t});\r\n\t\t\t// 整理数据,还原数据原来大小\r\n\t\t\tlet scale = this.scale;\r\n\t\t\tlet temp = {\r\n\t\t\t\turl: this.temp.url,\r\n\t\t\t\twidth: this.temp.width * scale,\r\n\t\t\t\theight: this.temp.height * scale,\r\n\t\t\t\tword: this.temp.word\r\n\t\t\t};\r\n\t\t\tif(this.temp.txt){\r\n\t\t\t\ttemp.txt = {\r\n\t\t\t\t\twidth: this.temp.txt.width * scale,\r\n\t\t\t\t\tsize: this.temp.txt.size * scale,\r\n\t\t\t\t\tcolor: this.temp.txt.color,\r\n\t\t\t\t\tx: this.temp.txt.x * scale,\r\n\t\t\t\t\ty: this.temp.txt.y * scale\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 图片\r\n\t\t\tif (this.temp.box) {\r\n\t\t\t\ttemp.box = [];\r\n\t\t\t\tthis.temp.box.forEach(item => {\r\n\t\t\t\t\ttemp.box.push({\r\n\t\t\t\t\t\tw: item.w * scale,\r\n\t\t\t\t\t\th: item.h * scale,\r\n\t\t\t\t\t\tx: item.x * scale,\r\n\t\t\t\t\t\ty: item.y * scale,\r\n\t\t\t\t\t\timg: {\r\n\t\t\t\t\t\t\turl: item.img.url,\r\n\t\t\t\t\t\t\trotate_url: item.img.rotate_url,\r\n\t\t\t\t\t\t\tisfixed: item.img.isfixed,\r\n\t\t\t\t\t\t\trotate: item.img.rotate,\r\n\t\t\t\t\t\t\twidth: item.img.width * scale,\r\n\t\t\t\t\t\t\theight: item.img.height * scale,\r\n\t\t\t\t\t\t\tx: item.img.x * scale,\r\n\t\t\t\t\t\t\ty: item.img.y * scale\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t// 画预览图\r\n\t\t\tthis.cover = {\r\n\t\t\t\twidth: temp.width,\r\n\t\t\t\theight: temp.height\r\n\t\t\t};\r\n\t\t\tconst ctx = uni.createCanvasContext('coverCanvas');\r\n\t\t\tctx.clearRect(0, 0, temp.width, temp.height); // 清空画布\r\n\t\t\tif (temp.box) {\r\n\t\t\t\t// 绘制图片\r\n\t\t\t\ttemp.box.forEach(item => {\r\n\t\t\t\t\tctx.save();\r\n\t\t\t\t\tctx.fillRect(item.x, item.y, item.w, item.h);\r\n\t\t\t\t\tctx.clip();\r\n\t\t\t\t\tctx.translate(item.x, item.y);\r\n\t\t\t\t\tctx.drawImage(item.img.rotate_url, item.img.x, item.img.y, item.img.width, item.img.height);\r\n\t\t\t\t\tctx.restore();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tctx.drawImage(temp.url, 0, 0, temp.width, temp.height);\r\n\t\t\t// ctx.drawImage('../../static/t_template.png', 0, 0, temp.width, temp.height);\r\n\t\t\tif (temp.word && temp.word.length > 0) {\r\n\t\t\t\tlet num = 0.8;\r\n\t\t\t\tlet width = temp.txt.width;\r\n\t\t\t\tlet size = temp.txt.size;\r\n\t\t\t\tlet color = temp.txt.color;\r\n\t\t\t\tlet x = temp.txt.x;\r\n\t\t\t\tlet y = temp.txt.y;\r\n\t\t\t\tlet m_t = size * 1.7;\r\n\t\t\t\ttemp.word.forEach(item => {\r\n\t\t\t\t\tctx.setFontSize(size);\r\n\t\t\t\t\tctx.setFillStyle(color);\r\n\t\t\t\t\tif (item.length <= Math.floor(width / size)) {\r\n\t\t\t\t\t\t// 不换行\r\n\t\t\t\t\t\tctx.fillText(item, x, y + m_t * num, width);\r\n\t\t\t\t\t\tnum++;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 换行\r\n\t\t\t\t\t\tlet word_arr = item.split('');\r\n\t\t\t\t\t\tlet arr = [];\r\n\t\t\t\t\t\tlet str = '';\r\n\t\t\t\t\t\tlet max_num = Math.floor(width / size);\r\n\t\t\t\t\t\tword_arr.forEach((vo, idx) => {\r\n\t\t\t\t\t\t\tstr += vo;\r\n\t\t\t\t\t\t\tif ((idx != 0 && idx % max_num == 0) || idx + 1 == word_arr.length) {\r\n\t\t\t\t\t\t\t\tarr.push(str);\r\n\t\t\t\t\t\t\t\tstr = '';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tarr.forEach(vo => {\r\n\t\t\t\t\t\t\tctx.fillText(vo, x, y + m_t * num, width);\r\n\t\t\t\t\t\t\tnum++;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tctx.draw();\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t\tx: 0,\r\n\t\t\t\t\ty: 0,\r\n\t\t\t\t\twidth: temp.width,\r\n\t\t\t\t\theight: temp.height,\r\n\t\t\t\t\tdestWidth: temp.width,\r\n\t\t\t\t\tdestHeight: temp.height,\r\n\t\t\t\t\tcanvasId: 'coverCanvas',\r\n\t\t\t\t\tsuccess: function(result) {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tlet url = result.tempFilePath;\r\n\t\t\t\t\t\tthat.data.word = JSON.stringify(that.data.word);\r\n\t\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\t\turl: app.globalData.host + 'common/upload',\r\n\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\t'content-type': 'multipart/form-data',\r\n\t\t\t\t\t\t\t\ttoken: app.globalData.token\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfilePath: url,\r\n\t\t\t\t\t\t\tname: 'file',\r\n\t\t\t\t\t\t\tformData: that.data,\r\n\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\tlet data = JSON.parse(res.data);\r\n\t\t\t\t\t\t\t\tif (data.code == 200) {\r\n\t\t\t\t\t\t\t\t\tutil.success(\r\n\t\t\t\t\t\t\t\t\t\t'保存成功',\r\n\t\t\t\t\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\t\t\t\t\tif (that.userInfo.identity == 3) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../albumList/albumList'\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t1200\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tutil.msg(data.msg);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}, 2000);\r\n\t\t}\r\n\t}\r\n};\r\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--10-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--10-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=style&index=0&lang=less&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}